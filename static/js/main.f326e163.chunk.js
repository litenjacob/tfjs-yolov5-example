(this["webpackJsonptfjs-yolov5-example"]=this["webpackJsonptfjs-yolov5-example"]||[]).push([[0],{257:function(e,t,a){"use strict";a.r(t);var n=a(5),o=a(6),r=a(10),i=a(14),c=a(15),s=a(139),l=a.n(s),d=a(234),h=a.n(d),p=a(235),u=a.n(p),b=(a(264),a(102)),f=a(286),m="".concat("/tfjs-yolov5-example","/web_model/model.json"),g=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],v=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={model:null,preview:"",predictions:[]},e.onDrop=function(t,a,n){e.setState({preview:t[0].preview||n[0]})},e.cropToCanvas=function(e,t,a){var n=e.naturalWidth,o=e.naturalHeight;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#000000",a.fillRect(0,0,t.width,t.height);var r=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),i=Math.round(n*r),c=Math.round(o*r);a.drawImage(e,0,0,n,o,(t.width-i)/2,(t.height-c)/2,i,c)},e.onImageChange=function(t){var a=document.getElementById("canvas"),o=a.getContext("2d");e.cropToCanvas(t.target,a,o);var r=f.image.resizeBilinear(f.browser.fromPixels(a),[320,320]).div(255).expandDims(0),i=performance.now();e.state.model.executeAsync(r).then((function(e){var t=performance.now(),r=document.createElement("div");r.innerHTML="Inference took: ".concat(t-i," ms"),document.body.appendChild(r);var c="16px sans-serif";o.font=c,o.textBaseline="top";var s,l=Object(n.a)(e,4),d=l[0],h=l[1],p=l[2],u=l[3];for(s=0;s<u.dataSync()[0];++s){var b=d.dataSync().slice(4*s,4*(s+1)),f=Object(n.a)(b,4),m=f[0],v=f[1],w=f[2],y=f[3];m*=a.width,w*=a.width,v*=a.height;var j=w-m,k=(y*=a.height)-v,x=g[p.dataSync()[s]],S=h.dataSync()[s].toFixed(2);o.strokeStyle="#00FFFF",o.lineWidth=4,o.strokeRect(m,v,j,k),o.fillStyle="#00FFFF";var O=o.measureText(x+":"+S).width,F=parseInt(c,10);o.fillRect(m,v,O+4,F+4)}for(s=0;s<u.dataSync()[0];++s){var D=d.dataSync().slice(4*s,4*(s+1)),z=Object(n.a)(D,3),C=z[0],I=z[1];C*=a.width,I*=a.height;var M=g[p.dataSync()[s]],T=h.dataSync()[s].toFixed(2);o.fillStyle="#000000",o.fillText(M+":"+T,C,I)}}))},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.loadGraphModel(m).then((function(t){e.setState({model:t})}))}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"Dropzone-page",children:this.state.model?Object(b.jsxs)(u.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop,children:[this.state.preview?Object(b.jsx)("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",Object(b.jsx)("canvas",{id:"canvas",width:"640",height:"640"})]}):Object(b.jsx)("div",{className:"Dropzone",children:"Loading model..."})})}}]),a}(l.a.Component),w=document.getElementById("root");h.a.render(Object(b.jsx)(v,{}),w)},264:function(e,t,a){},271:function(e,t){},272:function(e,t){},280:function(e,t){},283:function(e,t){},284:function(e,t){},285:function(e,t){}},[[257,1,2]]]);
//# sourceMappingURL=main.f326e163.chunk.js.map